01_intro.mov
介绍本课程的思路，要实现的功能。

02_contract_doc.mov
和支付宝签订担保交易收款合同，得到 pid 和 key 。下载开发文档。

可以到 <a href="http://b.alipay.com">b.alipay.com</a> 点击“产品商店”，选择“产品大全”，看到”担保交易收款“，点进入。国内的网站都是要备案的，用不用支付宝都一样。但是如果你的服务器在国外，网站也没有备案，那么也一样是可以使用支付宝的。比如我自己的 <a href="http://haoqicat.com">haoqicat.com</a> 就是这种情况，而且用支付宝接口收款两年多了，没有任何问题。

一次签约的期限大概是一年吧，到期之后，支付宝公司的服务还是很贴心的，不断给你发短信，邮件，不断提醒你续签合同，续签是很简单的，而且也不收钱。

下载文档，并进行解压缩。
在 ubuntu 中使用 unzip 来进行解压缩

<pre><code>
  unzip -O GBK alipayescow.zip
</code></pre>

上面 -O 后面添加编码格式是必须的，不然解压出来的文件名就都是乱码。解压后由个别文件中的中文内容是乱码，可以用下面的命令来转换编码格式。

<pre><code>
  iconv -f GBK -t UTF-8 -o output.txt 更新日志.txt
</code></pre>


提一下，支付宝官方有一个 <a href="http://fun.alipay.com/zfbxt/qianyueditu.htm?src=nsf04">签约地图</a> 的页面，挺好看。

03_setup_project.mov

搭建 rails 项目，使用 alipay 这个 Gem，并添加 PID/KEY 进来。实话实说，这一集里面就是把 alipay 这个 Gem 添加进来，并且把 PID/KEY 添加到 alipay.rb 文件里面，如果你对 rails 项目搭建非常熟悉了，基本上直接可以跳到视频的最后几分钟进行观看。

支付宝官方教程在 <a href="http://fun.alipay.com/zfbxt/">这里</a>。

<a href="http://fun.alipay.com/zfbxt/jicheng.html#pidkey">什么是 PID/KEY ？</a>

搭建步骤

rails -v
rails new alipay -d mysql
cd alipay
rake db:create db:migrate # 由于我本地 mysql 没有设置密码，所以也不用修改 database.yml 文件
rails s # 这样就可以用 local.dev:3000 来访问项目了

# 添加下面的内容到 application.rb 中
config.generators do |g|
    g.assets false
    g.helper false
    g.test_framework false
end

# 先来生成 cups 表，然后用 seed.rb 来填充数据
rails g model cup name:string price:float cover:string
rake db:migrate
# edit seed.rb
Cup.create([{ name: '白色杯子', price: '4.5', cover: 'white.jpg'}, { name: '绿色杯子', price: '7.5', cover: 'green.jpg'}])
# 把 white.jpg 和 green.jpg 放到 app/assets/images 中备用
rake db:seed # 数据库中填充两个杯子的数据
#下一步来在首页上显示出这两个杯子
rails g controller cups index
#edit routes.rb
--- get 'cups/index'
+++ root 'cups#index'
# edit cups_controller.rb 中的 index 方法
# edit views/cups/index.html
# add main.css
# edit application.html.erb
rails s # 这时候就可以看到首页上的两个杯子了
# 下面需要创建 orders 表
rails g model order
